#!/usr/bin/env python
from ecmwfapi import ECMWFDataServer
server = ECMWFDataServer()

coord= [
[1.0000, 51.4178, 2.7056, 50.9656, 3.4228, 0.4523, 0.7171],
[2.0000, 50.1404, 5.1568, 49.6882, 5.8544, 0.4523, 0.6977],
[3.0000, 51.2, 4.0993, 50.5, 4.8107, 0.4523, 0.7115],
[4.0000, 43.5031, 27.4893, 43.0508, 28.1057, 0.4523, 0.6164],
[5.0000, 41.8281, 1.1028, 41.3758, 1.7028, 0.4523, 0.6000],
[6.0000, 42.1150, 2.6952, 41.6627, 3.2992, 0.4523, 0.6040],
[7.0000, 49.8844, 13.4703, 49.4322, 14.1653, 0.4523, 0.6950],
[8.0000, 49.7272, 16.4423, 49.2750, 17.1347, 0.4523, 0.6923],
[9.0000, 54.2305, 9.6655, 53.7783, 10.4282, 0.4523, 0.7627],
[10.0000, 51.3508, 13.4115, 50.8985, 14.1258, 0.4523, 0.7143],
[11.0000, 49.7668, 12.0566, 49.3145, 12.7489, 0.4523, 0.6923],
[12.0000, 51.6317, 6.6069, 51.1794, 7.3269, 0.4523, 0.7200],
[13.0000, 48.0997, 7.6693, 47.6474, 8.3384, 0.4523, 0.6691],
[14.0000, 51.5373, 8.4435, 51.0851, 9.1606, 0.4523, 0.7171],
[15.0000, 52.6862, 9.3257, 52.2339, 10.0634, 0.4523, 0.7377],
[16.0000, 48.4008, 11.7647, 47.9486, 12.4388, 0.4523, 0.6742],
[17.0000, 48.2692, 9.8846, 47.8169, 10.5562, 0.4523, 0.6716],
[18.0000, 50.7263, 10.7821, 50.2740, 11.4880, 0.4523, 0.7059],
[19.0000, 50.3359, 6.1983, 49.8836, 6.8987, 0.4523, 0.7004],
[20.0000, 50.2121, 8.3651, 49.7598, 9.0628, 0.4523, 0.6977],
[21.0000, 52.8747, 13.4874, 52.4224, 14.2282, 0.4523, 0.7407],
[22.0000, 54.5, 11.3, 53.5, 12.4411, 0.4523, 0.7660],
[23.0000, 48.8114, 9.4432, 48.3591, 10.1224, 0.4523, 0.6792],
[24.0000, 52.3862, 10.8102, 51.9340, 11.5419, 0.4523, 0.7317],
[25.0000, 61.1300, 26.6465, 60, 27.5696, 0.4523, 0.9231],
[26.0000, 61.9935, 22.6028, 61.5412, 23.5501, 0.4523, 0.9474],
[27.0000, 62.1331, 29.3215, 61.6809, 30.2739, 0.4523, 0.9524],
[28.0000, 60.3546, 21.1934, 59.9023, 22.0934, 0.4523, 0.9000],
[29.0000, 63.0887, 26.8897, 62.6365, 27.8733, 0.4523, 0.9836],
[30.0000, 67.3652, 26.3200, 66.9130, 27.4738, 0.4523, 1.1538],
[31.0000, 62.901, 24.9562, 62.0784, 25.9240, 0.4523, 0.9677],
[32.0000, 65.0011, 25.7926, 64.5488, 26.8452, 0.4523, 1.0526],
[33.0000, 60.4968, 24.4168, 60.0445, 25.3213, 0.4523, 0.9045],
[34.0000, 63.3310, 23.3236, 62.6, 24.3181, 0.4523, 0.9945],
[35.0000, 50.3620, 1.4845, 49.9097, 2.263, 0.4523, 0.7004],
[36.0000, 42.3559, 9.1934, 41.9036, 9.7994, 0.4523, 0.6061],
[37.0000, 50.3545, 3.4617, 49.9022, 4.1621, 0.4523, 0.7004],
[38.0000, 47.5814, 4.4437, 47.1291, 5.1079, 0.4523, 0.6642],
[39.0000, 44.5492, 4.4486, 44.0969, 5.0758, 0.4523, 0.6272],
[40.0000, 45.0575, -1.0086, 44.6053, -0.3748, 0.4523, 0.6338],
[41.0000, 47.4201, 1.8331, 46.6972, 2.8858, 0.7229, 1.0526],
[42.0000, 49.1534, -0.4916, 48.7011, 0.1928, 0.4523, 0.6844],
[43.0000, 47.124, -0.4215, 45.815, 0.4831, 0.4523, 0.6545],
[44.0000, 43.4428, 6.0646, 42.9905, 6.6810, 0.4523, 0.6164],
[45.0000, 45.3306, 1.0514, 44.8783, 1.6875, 0.4523, 0.6360],
[46.0000, 45.5161, 3.3903, 45.0639, 4.0286, 0.4523, 0.6383],
[47.0000, 44.35, 2.10, 43.62, 3.615, 0.7229, 1.0000],
[48.0000, 49.0000,  1.6666,   48.5478,    2.3484,    0.4523,    0.6818],
[49.0000, 47.5947, 6.6871, 47.1425, 7.3513, 0.4523, 0.6642],
[50.0000, 48.9420, 6.2408, 48.4897, 6.9226, 0.4523, 0.6818],
[51.0000, 44.0322, 4.1914, 43.5800, 4.8142, 0.4523, 0.6228],
[52.0000, 46.2939, 4.1215, 45.8416, 4.7690, 0.4523, 0.6475],
[53.0000, 43.1445, 2.5578, 42.6922, 3.1722, 0.4523, 0.6143],
[54.0000, 48.6870, -4.7683, 48.2347, -4.0917, 0.4523, 0.6767],
[55.0000, 43.8006, 1.0658, 43.3483, 1.6865, 0.4523, 0.6207],
[56.0000, 49.0000, 1.6666, 48.5478, 2.3484, 0.4523, 0.6818],
[57.0000, 47.5636, -1.9873, 47.1114, -1.3255, 0.4523, 0.6618],
[58.0000, 48.6884, 3.9711, 48.2361, 4.6478, 0.4523, 0.6767],
[59.0000, 52.3278, 4.8125, 51.8756, 5.5442, 0.4523, 0.7317],
[60.0000, 53.1795, 4.4165, 52.7272, 5.1634, 0.4523, 0.7469],
[61.0000, 50.6203, 19.7268, 50.1680, 20.4327, 0.4523, 0.7059],
[62.0000, 54.848, 18.07, 54.15, 18.84, 0.4523, 0.7725],
[63.0000, 52.6313, 20.5921, 52.1791, 21.3298, 0.4523, 0.7377],
[64.0000, 52.6394, 16.4282, 52.1871, 17.1659, 0.4523, 0.7377],
[65.0000, 50.3778, 18.3765, 49.9255, 19.0769, 0.4523, 0.7004],
[66.0000, 50.3402, 21.6868, 49.8880, 22.3872, 0.4523, 0.7004],
[67.0000, 54.0164, 15.4514, 53.5641, 16.2109, 0.4523, 0.7595],
[68.0000, 37.5315, -8.2339, 37.0792, -7.6696, 0.4523, 0.5643],
[69.0000, 39.2975, -8.6883, 38.8452, -8.1095, 0.4523, 0.5788],
[70.0000, 41.0712, -8.5767, 40.6189, -7.9827, 0.4523, 0.5941],
[71.0000, 56.7289, 12.2042, 56.0061, 13.4992, 0.7229, 1.2950],
[72.0000, 59.8805, 17.5008, 59.4283, 18.3918, 0.4523, 0.8911],
[73.0000, 57.5296, 17.9834, 57.0774, 18.8168, 0.4523, 0.8333],
[74.0000, 61.8032, 16.2432, 61.3510, 17.1856, 0.4523, 0.9424],
[75.0000, 67.9349, 20.0257, 67.4827, 21.2099, 0.4523, 1.1842],
[76.0000, 56.5216, 15.2049, 56.0694, 16.0157, 0.4523, 0.8108],
[77.0000, 60.9491, 14.4184, 60.4969, 15.3368, 0.4523, 0.9184],
[78.0000, 65.6570, 21.3261, 65.2048, 22.4039, 0.4523, 1.0778],
[79.0000, 63.5211, 14.2591, 63.0689, 15.2591, 0.4523, 1.0000],
[80.0000, 63.8656, 17.8963, 63.4134, 18.9075, 0.4523, 1.0112],
[81.0000, 58.6170, 12.1442, 57.8942, 13.5078, 0.7229, 1.3636],
[82.0000, 58.3320, 15.5118, 57.8798, 16.3608, 0.4523, 0.8491],
[83.0000, 46.2939, 14.9612, 45.8416, 15.6086, 0.4523, 0.6475],
[84.0000, 46.3241, 13.9045, 45.8718, 14.5520, 0.4523, 0.6475]
]

for i in range(1, len(coord)):
#for i in [  42,  47, 61]: 2, 21, 24, 33,30, 34,46,
    server.retrieve({
        "class": "ea",
        "dataset": "era5",
        "date": "2018-01-01/to/2019-01-01",
        "expver": "1",
        "levelist": "900",
        "levtype": "pl",
        "param": "75.128/130.128/131.128/132.128/248.128",
        "step": "0",
        "stream": "enda",
        "time": "00:00:00/03:00:00/06:00:00/09:00:00/12:00:00/15:00:00/18:00:00/21:00:00",
        "type": "em",
        "grid": str(coord[i][5])+"/"+str(coord[i][6]),
        "format": "netcdf",
        "area":str(coord[i][1])+"/"+str(coord[i][2])+"/"+str(coord[i][3])+"/"+str(coord[i][4]),
        "target": "output_09-2016_"+str(int(coord[i][0]))+".nc",
    })


alt = [ '950', '900', '850', '800', '750', '700'] #
for i in alt:
    server.retrieve({
        "class": "ea",
        "dataset": "era5",
        "date": "2018-01-01/to/2019-01-01",
        "expver": "1",
        "levelist": i,
        "levtype": "pl",
        "param": "75.128/130.128/131.128/132.128/248.128",
        "step": "0",
        "stream": "enda",
        "time": "00:00:00/03:00:00/06:00:00/09:00:00/12:00:00/15:00:00/18:00:00/21:00:00",
        "type": "em",
        "grid": "0.225/0.225",
        "format": "netcdf",
        "area": "europe",
        "target": "output_20160919-20161010_"+i+"_europe.nc",
    })

server.retrieve({
    "class": "ea",
    "dataset": "era5",
    "date": "2018-01-01/to/2019-01-01",
    "expver": "1",
    "levtype": "sfc",
    "param": "1.228/3.228/7.228/8.128/8.228/9.128/9.228/10.228/11.228/12.228/13.228/14.228/15.128/15.228/16.128/16.228/17.128/17.228/18.128/18.228/19.228/21.228/22.228/23.228/24.228/26.128/27.128/28.128/29.128/29.228/30.128/31.128/32.128/33.128/34.128/35.128/36.128/37.128/38.128/39.128/40.128/41.128/42.128/43.128/44.128/45.128/49.128/50.128/57.128/59.128/66.128/67.128/74.128/78.128/79.128/88.228/89.228/90.228/129.128/129.228/130.228/131.228/132.228/134.128/136.128/137.128/139.128/141.128/142.128/143.128/144.128/145.128/146.128/147.128/148.128/151.128/159.128/160.128/161.128/162.128/163.128/164.128/165.128/166.128/167.128/168.128/169.128/170.128/172.128/175.128/176.128/177.128/178.128/179.128/180.128/181.128/182.128/183.128/186.128/187.128/188.128/195.128/196.128/197.128/198.128/201.128/202.128/205.128/206.128/208.128/209.128/210.128/211.128/212.128/213.128/217.228/218.228/219.228/220.228/221.228/226.228/227.228/228.128/229.128/230.128/231.128/232.128/235.128/236.128/238.128/239.128/240.128/243.128/244.128/245.128/246.228/247.228/251.228/260015/260121/260123",
    "step": "0",
    "stream": "enda",
    "time": "00:00:00/03:00:00/06:00:00/09:00:00/12:00:00/15:00:00/18:00:00/21:00:00",
    "type": "em",
    "grid": "0.225/0.225",
    "format": "netcdf",
    "area": "europe",
    "target": "output_20160919-20161010_srf_europe.nc",
})